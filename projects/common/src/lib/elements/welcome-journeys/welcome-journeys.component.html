<ng-container *ngIf="!State.Loading">
  <mat-card>
    <mat-card-header>
      <mat-card-title><h1>Welcome to Fathym!</h1></mat-card-title>
    </mat-card-header>

    <div fxLayout="row wrap">
      <div fxFlex="100%" class="mat-body">
        <ng-container *ngIf="State.IsIoTStarter">
          <p>
            To start your IoT journey, we have setup a few things automatically
            for you. This will allow you to start working with your devices and
            data immediately. Start exploring to see your data visualized in
            minutes on a best practice cloud setup for Azure.
          </p>

          <p>
            Your data is ready to begin using. Connect it with your favorite
            tools or let us help you walk through learning some new ones.
          </p>
        </ng-container>

        <ng-container *ngIf="!State.IsIoTStarter">
          <p>
            The Fathym Low-Code Framework enables you to host, manage and deploy
            data-driven applications.
          </p>

          <p>
            Each element of the Low-Code Framework is built from Low Code Units
            â€“ modular and reusable building blocks of code that can be as large
            as an application, or as small as a data visualization.
          </p>

          <p>
            The framework drastically cuts down development time by automating
            and applying best practice workflows for cloud infrastructure
            automation and application management. You can create data
            applications without having to manage and maintain the underlying
            infrastructure.
          </p>
        </ng-container>
      </div>

      <!-- <div class="accent-divider"></div> -->

      <div fxFlex="100%">
        <div
          gdColumns="30% 70%"
          gdColumns.lt-sm="40% 60%"
          gdColumns.lt-xs="100%"
          gdGap="2em"
          gdGap.lt-sm="1em"
          class="spread"
          *ngIf="State.IsIoTStarter"
        >
          <mat-card>
            <mat-nav-list>
              <mat-list-item>
                <h3>Visualize Your Data Flow</h3>
              </mat-list-item>

              <mat-list-item>
                <p>
                  Some default applications to get you started with your data.
                </p>
              </mat-list-item>

              <mat-list-item>
                <a
                  matLine
                  color="primary"
                  href="/freeboard"
                  target="_blank"
                >
                  Freeboard - Open Source Dashboard
                </a>
              </mat-list-item>

              <mat-list-item>
                <a
                  matLine
                  color="primary"
                  href="/lcu-charts"
                  target="_blank"
                >
                  LCU Charts - Data Visualization
                </a>
              </mat-list-item>
            </mat-nav-list>
          </mat-card>

          <mat-card class="streaming-data">
            <mat-card-header>
              <mat-card-title>
                <h3>Streaming Data</h3>
              </mat-card-title>
            </mat-card-header>

            <mat-card-content>
              <lcu-iot-data-chart
                *ngIf="IoTDataResults"
                [data-set]="IoTDataResults"
                [labels]="IoTDataLabels"
              ></lcu-iot-data-chart>
              <!-- <canvas
                *ngIf="IoTDataResults"
                baseChart
                [datasets]="IoTDataResults"
                [labels]="IoTDataLabels"
                [options]="IoTChartOptions"
                [colors]="IoTChartColors"
                [legend]="ChartLegend"
                [chartType]="ChartType"
                [plugins]="ChartPlugins"
              >
              </canvas> -->
            </mat-card-content>
          </mat-card>

          <mat-card gdColumn="auto / span 2">
            <h3>Send Your Own Data</h3>

            <p>
              We've set your IoT Data Flow up in the easiest possible, best
              practice starting point. Sending data into your flow is as simple
              as sending an REST request. We've got a few ways to get you
              started.
            </p>

            <mat-accordion>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Test From Here
                  </mat-panel-title>

                  <mat-panel-description>
                    (Web Form)
                  </mat-panel-description>
                </mat-expansion-panel-header>

                <p>
                  The simplest way to get testing straight away is our embedded
                  form:
                </p>

                <form (ngSubmit)="SendDeviceData()" [formGroup]="IoTDataForm">
                  <mat-form-field class="mat-full-width">
                    <input
                      matInput
                      placeholder="DeviceID"
                      name="deviceId"
                      value="my-test-device-1"
                    />
                  </mat-form-field>

                  <mat-form-field class="mat-full-width">
                    <input
                      matInput
                      placeholder="DeviceType"
                      name="deviceType"
                      value="my-test-device"
                    />
                  </mat-form-field>

                  <fieldset>
                    <legend>Device Data</legend>

                    <mat-form-field class="mat-full-width">
                      <input
                        matInput
                        placeholder="Latitude"
                        name="latitude"
                        value="44.9153586"
                      />
                    </mat-form-field>

                    <mat-form-field class="mat-full-width">
                      <input
                        matInput
                        placeholder="Longitude"
                        name="longitude"
                        value="-83.4399405"
                      />
                    </mat-form-field>
                  </fieldset>

                  <fieldset>
                    <legend>Sensor Readings</legend>

                    <mat-form-field class="mat-full-width">
                      <input
                        matInput
                        name="temp"
                        placeholder="Temperature"
                        value="98"
                      />
                    </mat-form-field>

                    <mat-form-field class="mat-full-width">
                      <input
                        matInput
                        name="windHeading"
                        placeholder="WindHeading"
                        value="274"
                      />
                    </mat-form-field>
                  </fieldset>

                  <div>
                    <div fxFlex></div>

                    <button type="submit" mat-raised-button color="accent">
                      Send Device Data
                    </button>
                  </div>
                </form>
              </mat-expansion-panel>

              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Using API Testing Tools
                  </mat-panel-title>

                  <mat-panel-description>
                    (Postman & Insomnia)
                  </mat-panel-description>
                </mat-expansion-panel-header>

                <p>hey</p>
              </mat-expansion-panel>

              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Using Code
                  </mat-panel-title>

                  <mat-panel-description>
                    (cURL, C# & JS)
                  </mat-panel-description>
                </mat-expansion-panel-header>

                <p>hey</p>

                <pre
                  >{{ "{" }}
  'DeviceID': 'xxx',
  'DeviceType': 'a-thing',
  'Version': 'xxx',
  'Timestamp': 'xxx',
  'DeviceData': {{ "{" }}
      'Latitude': xxxx,
      'Longitude': xxxx,
      'Floor': 12,
      'Room': 'Conference Chuck'
      'key': 'value',
      'pairs': 'of-data'
    },
    'SensorReadings': {{ "{" }}
        'Temp': 98.8,
        'OtherSensor': 'vertical'
    },
    'SensorMetadata': {{ "{" }}
        'Temp': {{ "{" }}
            'Battery': .2,
            'Tilt': .8
        }
    }
}
                </pre>
              </mat-expansion-panel>
            </mat-accordion>
          </mat-card>

          <mat-card gdColumn="auto / span 2">
            <h3>What's Next?</h3>

            <p>
              Use the Journeys below to familiarize yourself with the rest of
              what you can do with Fathym!
            </p>

            <mat-tab-group mat-align-tabs="left">
              <mat-tab
                *ngFor="let journeySet of DividedJourneys"
                label="{{ journeySet.JourneyName }}"
              >
                <div
                  fxLayout="row wrap"
                  fxLayoutAlign="space-between"
                  fxLayout.sm="column"
                >
                  <div
                    *ngFor="let journey of journeySet.Journeys"
                    [fxFlex.sm]="100"
                    [fxFlex.md]="50"
                    [fxFlex.lg]="33"
                    class="mat-body margin-top-3"
                  >
                    <lcu-journey-card
                      *ngIf="
                        ContainsRoleType(journey, journeySet.JourneyName) &&
                        journey.Active
                      "
                      [journey-data]="journey"
                    ></lcu-journey-card>
                  </div>
                </div>
              </mat-tab> </mat-tab-group
          ></mat-card>
        </div>
      </div>
    </div>
  </mat-card>
</ng-container>

<div class="spread" *ngIf="State.Loading">
  <mat-spinner></mat-spinner>
</div>
