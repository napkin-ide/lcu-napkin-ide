<div fxLayout="row wrap" fxLayoutAlign="center stretch" class="identity">
  <div fxFlex="30%" fxFlex.lt-md="100%" class="details">
    <div class="inner">
      <mat-nav-list>
        <mat-list-item>
          <div matLine class="slogan" style="height: 6em; margin: 1em 0 1em 0;">
            <!-- <div class="logo"> -->
            <!-- <div *ngIf="LogoClass" [ngClass]="LogoClass"></div> not really using this-->
            <!-- <div class="primary-logo"></div> -->
            <!-- </div> -->
            <!-- <h1 class="center title">
              <img src="../../../assets/img/fathym_logo_screen.png" />
              Fathym It. Build It.
            </h1> -->
          </div>
        </mat-list-item>

        <mat-divider></mat-divider>

        <ng-container *ngIf="State.SetupStep">
          <ng-container>
            <mat-list-item
              *ngIf="State.SetupStep == SetupStepTypes.OrgDetails"
              class="active-mat-list-item"
            >
              <mat-icon matListIcon>chevron_right</mat-icon>

              <div matLine>
                <h2
                  class="h2 paragraph-title-bold margin-bottom-3 margin-top-3"
                >
                  Project Details
                </h2>

                <p class="mat-subheading-2">
                  Fathymâ€™s low-code framework is designed for projects of any
                  size. It's built to give developers the freedom and best
                  practice workflows to rapidly create IoT and data-driven
                  applications that are agnostic to tools, platforms and clouds.
                </p>
              </div>
            </mat-list-item>

            <mat-list-item
              *ngIf="
                State.SetupStep != SetupStepTypes.OrgDetails && DetailsFormValid
              "
            >
              <mat-icon matListIcon class="success">check_circle</mat-icon>

              <a
                matLine
                (click)="SetStep(SetupStepTypes.OrgDetails)"
                *ngIf="!State.NewEnterpriseAPIKey"
              >
                Project Details Configured
              </a>

              <h2
                matLine
                *ngIf="State.NewEnterpriseAPIKey"
                class="h2 paragraph-title-bold margin-bottom-3 margin-top-3"
              >
                Project Details Configured
              </h2>
            </mat-list-item>
          </ng-container>

          <mat-divider></mat-divider>

          <ng-container>
            <mat-list-item
              class="list-item-disabled"
              *ngIf="
                State.SetupStep !== SetupStepTypes.AzureSetup && !InfraFormValid
              "
            >
              <mat-icon matListIcon class="error">highlight_off</mat-icon>

              <h1 matLine>Set Up Project Infrastructure</h1>
            </mat-list-item>

            <mat-list-item
              *ngIf="State.SetupStep === SetupStepTypes.AzureSetup"
              class="active-mat-list-item"
            >
              <mat-icon matListIcon>chevron_right</mat-icon>

              <div matLine>
                <h2
                  class="h2 paragraph-title-bold margin-bottom-3 margin-top-3"
                >
                  Set Up Project Infrastructure
                </h2>

                <h2 class="mat-subheading-2">
                  You will need to have a Microsoft Azure account to get
                  started. Create a new account or use an existing account.
                </h2>

                <div class="btn-split">
                  <a
                    mat-raised-button
                    href="https://azure.microsoft.com/free/"
                    color="primary"
                    class="mat-full-width"
                    target="_blank"
                  >
                    <img matListIcon src="assets/img/Azure-logo.png" />

                    Create &nbsp; a &nbsp; Free &nbsp; Azure &nbsp; Account
                  </a>
                </div>

                <h2 class="mat-subheading-2" style="margin-top: 15px;">
                  Fathym needs access to your Azure subscription to help you
                  manage your infrastructure.
                </h2>

                <div class="btn-split">
                  <a
                    mat-raised-button
                    href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#get-values-for-signing-in."
                    color="primary"
                    class="mat-full-width"
                    target="_blank"
                  >
                    <mat-icon>settings</mat-icon>

                    Locate Your Configuration Information
                  </a>
                </div>

                <div class="spread">
                  <h3 class="mat-subheading-1">
                    Additional infrastructure options coming soon!
                  </h3>
                </div>
              </div>
            </mat-list-item>

            <mat-list-item
              *ngIf="
                State.SetupStep !== SetupStepTypes.AzureSetup && InfraFormValid
              "
            >
              <mat-icon matListIcon class="success">check_circle</mat-icon>

              <a matLine (click)="SetStep(SetupStepTypes.AzureSetup)"
                >Project Infrastructure Set Up</a
              >
            </mat-list-item>
          </ng-container>

          <mat-divider></mat-divider>

          <ng-container>
            <!-- <mat-list-item *ngIf="State.SetupStep != SetupStepTypes.Review && (!HostForm.valid || !State.Host || !State.TermsAccepted)"> -->
            <mat-list-item
              class="list-item-disabled"
              *ngIf="
                State.SetupStep !== SetupStepTypes.Review &&
                (!State.Host || !State.TermsAccepted)
              "
            >
              <mat-icon matListIcon class="error">highlight_off</mat-icon>

              <h1 matLine>Permissions & Launch</h1>
            </mat-list-item>

            <mat-list-item
              *ngIf="
                State.SetupStep !== SetupStepTypes.Review &&
                State.Host &&
                State.TermsAccepted &&
                State.SetupStep != SetupStepTypes.Complete
              "
            >
              <mat-icon matListIcon>chevron_right</mat-icon>

              <a matLine (click)="SetStep(SetupStepTypes.Review)"
                >Permissions & Launch</a
              >
            </mat-list-item>

            <mat-list-item
              *ngIf="State.SetupStep === SetupStepTypes.Review"
              class="active-mat-list-item"
            >
              <mat-icon matListIcon>chevron_right</mat-icon>

              <div matLine>
                <h1
                  class="h2 paragraph-title-bold margin-bottom-3 margin-top-3"
                >
                  Permissions & Launch
                </h1>

                <h2 class="mat-subheading-2">
                  Fathym will set up a best practice IoT infrastructure for your
                  project. Once set up, you can adjust the architecture as
                  needed for your project.
                </h2>

                <!-- <h2 class="mat-subheading-2" *ngIf="State.EnterpriseBooted">
                  The initial configuration of your project has been set up. The
                  final step will deploy and configure the Fathym Framework on
                  the domain you've chosen.
                </h2> -->

                <h2 class="mat-subheading-2">
                  For more information, checkout the following documentation
                  link...
                </h2>
                <a [href]="HelpPdf" target="_blank"
                  >Fathym Registration Help PDF</a
                >
              </div>
            </mat-list-item>

            <mat-list-item *ngIf="State.SetupStep === SetupStepTypes.Complete">
              <mat-icon matListIcon class="success">check_circle</mat-icon>

              <h1 matLine>Fathym Framework Setup Complete</h1>
            </mat-list-item>
          </ng-container>
        </ng-container>
      </mat-nav-list>
    </div>
  </div>

  <div fxFlex="70%" fxFlex.lt-md="100%" fxFlexOrder.lt-md="0" class="content">
    <div class="inner">
      <div style="width: 100%;">
        <div class="spread">
          <mat-card>
            <div
              *ngIf="State.Loading && State.SetupStep !== SetupStepTypes.Review"
            >
              <p style="text-align: center;">
                Behind the scenes Thinky is working hard to set up your Low Code
                Unit
              </p>

              <!-- <p style="text-align: center;"></p> -->

              <div
                fxLayout="row"
                fxLayoutAlign="center center"
                class="spinner-container"
              >
                <mat-spinner diameter="75"></mat-spinner>
                <div class="spinner-logo" logo-alt="Fathym Logo"></div>
              </div>
            </div>

            <ng-container
              *ngIf="
                !State.Loading || State.SetupStep === SetupStepTypes.Review
              "
            >
              <lcu-org-details
                #OrgDetailsComponent
                [state]="State"
              ></lcu-org-details>

              <lcu-org-infra
                #OrgInfraComponent
                [state]="State"
                (set-step)="SetStep($event)"
              ></lcu-org-infra>

              <lcu-org-review
                [state]="State"
                (set-step)="SetStep($event)"
              ></lcu-org-review>

              <lcu-complete
                [setup-step-types]="SetupStepTypes"
                [state]="State"
              ></lcu-complete>
            </ng-container>
          </mat-card>

          <!-- <mat-card>
            <pre>{{ State | json }}</pre>
          </mat-card> -->
        </div>
        <!-- original spinner  refer to line 265 and 270 for alt spinners-->
        <!-- <div *ngIf="State.Loading">
          <div class="spinner" logo-alt="Fathym Logo"></div>
          <mat-spinner></mat-spinner>
        </div> -->
      </div>
    </div>
  </div>
</div>
