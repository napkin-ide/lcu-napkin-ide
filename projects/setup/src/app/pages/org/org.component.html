<div fxLayout="row wrap" fxLayoutAlign="center stretch" class="identity">
  <div fxFlex="35%" fxFlex.lt-md="100%" class="details">
    <div class="inner">
      <mat-nav-list>
        <mat-list-item>
          <div matLine class="slogan" style="height: 6em; margin: 1em 0 1em 0;">
            <!-- <div class="logo"> -->
            <!-- <div *ngIf="LogoClass" [ngClass]="LogoClass"></div> not really using this-->
            <!-- <div class="primary-logo"></div> -->
            <!-- </div> -->
            <!-- <h1 class="center title">
              <img src="../../../assets/img/fathym_logo_screen.png" />
              Fathym It. Build It.
            </h1> -->
          </div>
        </mat-list-item>

        <mat-divider></mat-divider>

        <ng-container *ngIf="State.SetupStep">
          <ng-container>
            <mat-list-item
              *ngIf="State.SetupStep == SetupStepTypes.OrgDetails"
              class="active-mat-list-item"
            >
            <div fxLayout="row"fxLayoutAlign="space-between start" >
            <mat-icon 
             *ngIf="!State.OrganizationLookup  && !State.OrganizationName"
             matListIcon [ngClass]="'step-checkbox list-icon'">
              radio_button_unchecked
            </mat-icon>

            <mat-icon 
              *ngIf="(State.SetupStep === 'OrgDetails') && (State.OrganizationLookup && State.OrganizationName)" 
              matListIcon [ngClass]="'step-checkbox success'">
              check_circle
            </mat-icon>

              <div matLine class='reg-headers'>
                <h2
                
                >
                  Workspace Set Up
                </h2>
                  <hr class="hr-line">
                <p class="mat-subheading-2">
                  Fathymâ€™s low-code framework is designed for projects of any
                  size. It's built to give developers the freedom and best
                  practice workflows to rapidly create IoT and data-driven
                  applications that are agnostic to tools, platforms and clouds.
                </p>
                <a mat-raised-button 
                class="documentation-button" 
                color="primary" target="blank"
                href="https://support.fathym.com/docs/registration"
                fxLayoutAlign="center">
                  <mat-icon>description</mat-icon>
                  View Registration Documentation
                </a>
              </div>
            </div>
            </mat-list-item>
          

            <mat-list-item
              *ngIf="
                State.SetupStep != SetupStepTypes.OrgDetails && DetailsFormValid
              "
            >
              <mat-icon matListIcon class="success">check_circle</mat-icon>

              <a
                matLine
                (click)="SetStep(SetupStepTypes.OrgDetails)"
                *ngIf="!State.NewEnterpriseAPIKey"
              >
                Workspace Set Up
              </a>

              <h2
                matLine
                *ngIf="State.NewEnterpriseAPIKey"
                class="h2 paragraph-title-bold margin-bottom-3 margin-top-3"
              >
                Workspace Set Up
              </h2>
              
            </mat-list-item>
          </ng-container>

          <mat-divider></mat-divider>

          <ng-container>
            <mat-list-item
              class="list-item-disabled"
              *ngIf="
                State.SetupStep !== SetupStepTypes.AzureSetup && !InfraFormValid
              "
            >
            <mat-icon matListIcon class="list-icon">radio_button_unchecked</mat-icon>

              <h1 matLine>Workspace Infrastructure Set Up</h1>
            </mat-list-item>

            <mat-list-item
              *ngIf="State.SetupStep === SetupStepTypes.AzureSetup"
              class="active-mat-list-item"
            >
            <div fxLayout="row"fxLayoutAlign="space-between start" >
              <div class="icon-container">
              <mat-icon 
               *ngIf="State.SetupStep === SetupStepTypes.AzureSetup && !InfraFormValid"
               matListIcon [ngClass]="'step-checkbox list-icon'">
                radio_button_unchecked
              </mat-icon>
  
              <mat-icon 
                *ngIf="State.SetupStep === SetupStepTypes.AzureSetup && InfraFormValid" 
                matListIcon [ngClass]="'step-checkbox success'">
                check_circle
              </mat-icon>
            </div>
              <!-- <mat-icon matListIcon>chevron_right</mat-icon> -->

              <div matLine class='reg-headers'>
                <h2
                
                >
                  Workspace Infrastructure Set Up
                </h2>
                <hr class="hr-line">
                <h2 class="mat-subheading-2">
                  You will need a Microsoft Azure account to get
                  started. Create a new account or use an existing account.
                </h2>

                <div class="btn-split">
                  <a
                    mat-raised-button
                    href="https://azure.microsoft.com/free/"
                    color="primary"
                    class="mat-full-width"
                    target="_blank"
                  >
                    <img matListIcon src="assets/img/Azure-logo.png" />

                    Create/Connect a Microsoft Azure Account
                  </a>
                </div>

                <h2 class="mat-subheading-2" style="margin-top: 15px;">
                  Fathym needs access to your Azure subscription in order to
                  manage your infrastructure. Access your configuration information through
                  the link below.
                </h2>

                <div class="btn-split">
                  <a
                    mat-raised-button
                    href="https://support.fathym.com/docs/registration"
                    color="primary"
                    class="mat-full-width"
                    target="_blank"
                  >
                    <mat-icon>search</mat-icon>

                    Find Your Azure Configuration Information
                  </a>
                </div>

                <div class="spread">
                  <!-- <h3 class="mat-subheading-1">
                    Additional infrastructure options coming soon!
                  </h3> -->
                </div>
              </div>
            </div>
            </mat-list-item>

            <mat-list-item
              *ngIf="
                State.SetupStep !== SetupStepTypes.AzureSetup && InfraFormValid
              "
            >
              <mat-icon matListIcon class="success">check_circle</mat-icon>

              <a matLine (click)="SetStep(SetupStepTypes.AzureSetup)"
                >Workspace Infrastructure Set Up</a
              >
            </mat-list-item>
          </ng-container>

          <mat-divider></mat-divider>

          <ng-container>
            <!-- <mat-list-item *ngIf="State.SetupStep != SetupStepTypes.Review && (!HostForm.valid || !State.Host || !State.TermsAccepted)"> -->
            <mat-list-item
              class="list-item-disabled"
              *ngIf="
                State.SetupStep !== SetupStepTypes.Review &&
                (!State.Host || !State.TermsAccepted)
              "
            >
              <mat-icon matListIcon class="error">highlight_off</mat-icon>

              <h1 matLine>Finalize and Deploy</h1>
            </mat-list-item>

            <mat-list-item
              *ngIf="
                State.SetupStep !== SetupStepTypes.Review &&
                State.Host &&
                State.TermsAccepted &&
                State.SetupStep !== SetupStepTypes.Complete
              "
            >
            <mat-icon matListIcon class="list-icon">radio_button_unchecked</mat-icon>

              <!-- <mat-icon matListIcon>chevron_right</mat-icon> -->

              <a matLine (click)="SetStep(SetupStepTypes.Review)"
                >Finalize and Deploy</a
              >
            </mat-list-item>

            <mat-list-item
              *ngIf="State.SetupStep === SetupStepTypes.Review || State.SetupStep === SetupStepTypes.Complete"
              class="active-mat-list-item"
            >
              <!-- <mat-icon matListIcon>chevron_right</mat-icon> -->
              <div fxLayout="row"fxLayoutAlign="space-between start" >
                <mat-icon 
                 *ngIf="State.SetupStep === SetupStepTypes.Review "
                 matListIcon [ngClass]="'step-checkbox list-icon'">
                  radio_button_unchecked
                </mat-icon>
    
                <mat-icon 
                  *ngIf="State.SetupStep === SetupStepTypes.Complete" 
                  matListIcon [ngClass]="'step-checkbox success'">
                  check_circle
                </mat-icon>

              <div matLine class='reg-headers'>
                <h2
                                >
                  Finalize and Deploy
                </h2>
                <hr class="hr-line">
                <h2 class="mat-subheading-2">
                  Fathym will set up a best practice IoT infrastructure for your
                  workspace. Once set up, you can adjust the architecture as
                  needed.
                </h2>
                

                <!-- <h2 class="mat-subheading-2" *ngIf="State.EnterpriseBooted">
                  The initial configuration of your project has been set up. The
                  final step will deploy and configure the Fathym Framework on
                  the domain you've chosen.
                </h2> -->


                <!-- <h2 class="mat-subheading-2">
                  For more information, checkout the following documentation
                  link...
                </h2>
                <a [href]="HelpPdf" target="_blank"
                  >Fathym Registration Help PDF</a
                > -->
              </div>
              </div>
            </mat-list-item>

            <mat-list-item *ngIf="State.SetupStep === SetupStepTypes.Complete">
              <mat-icon matListIcon class="success">check_circle</mat-icon>

              <h1 matLine>Fathym Framework Setup Complete</h1>
            </mat-list-item>
          </ng-container>
        </ng-container>
      </mat-nav-list>
    </div>
  </div>

  <div fxFlex="65%" fxFlex.lt-md="100%" fxFlexOrder.lt-md="0" class="content">
    <div class="inner">
      <div style="width: 100%;">
        <div class="spread">
          <mat-card>
            <div
              *ngIf="State.Loading && State.SetupStep !== SetupStepTypes.Review"
            >
              <p style="text-align: center;">
                Behind the scenes Thinky is working hard to set up your Low Code
                Unit
              </p>

              <!-- <p style="text-align: center;"></p> -->

              <div
                fxLayout="row"
                fxLayoutAlign="center center"
                class="spinner-container"
              >
                <mat-spinner diameter="75"></mat-spinner>
                <div class="spinner-logo" logo-alt="Fathym Logo"></div>
              </div>
            </div>

            <ng-container
              *ngIf="
                !State.Loading || State.SetupStep === SetupStepTypes.Review
              "
            >
              <lcu-org-details
                #OrgDetailsComponent
                [state]="State"
              ></lcu-org-details>

              <lcu-org-infra
                #OrgInfraComponent
                [state]="State"
                (set-step)="SetStep($event)"
              ></lcu-org-infra>

              <lcu-org-review
                [state]="State"
                (set-step)="SetStep($event)"
              ></lcu-org-review>

              <lcu-complete
                [setup-step-types]="SetupStepTypes"
                [state]="State"
              ></lcu-complete>
            </ng-container>
          </mat-card>

          <!-- <mat-card>
            <pre>{{ State | json }}</pre>
          </mat-card> -->
        </div>
        <!-- original spinner  refer to line 265 and 270 for alt spinners-->
        <!-- <div *ngIf="State.Loading">
          <div class="spinner" logo-alt="Fathym Logo"></div>
          <mat-spinner></mat-spinner>
        </div> -->
      </div>
    </div>
  </div>
</div>
